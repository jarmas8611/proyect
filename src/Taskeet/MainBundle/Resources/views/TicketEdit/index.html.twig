{% extends_admingenerated "TaskeetMainBundle:TicketEdit:index.html.twig" %}

{% block form_fieldset_NONE %}
    <fieldset class="form_block form_fieldset_NONE fieldset_tabbable">
        <div class="row-fluid">
            <div class="control-group form_field field_text field_title">
                {% block form_title %}
                    {{ form_row(form['title']) }}
                {% endblock %}
            </div>
        </div>
        <div class="row-fluid">
            <div class="control-group form_field field_entity field_priority">
                {% block form_priority %}
                    {{ form_row(form['priority']) }}
                {% endblock %}
            </div>
            <div class="control-group form_field field_entity field_status">
                {% block form_status %}
                    {{ form_row(form['status']) }}
                {% endblock %}
            </div>
            
        </div>

        <div class="row-fluid">
            <div class="control-group form_field field_datepicker field_startDate">
                {% block form_startDate %}
                    {{ form_row(form['startDate']) }}
                {% endblock %}
            </div>
            <div class="control-group form_field field_datepicker field_dueDate">
                {% block form_dueDate %}
                    {{ form_row(form['dueDate']) }}
                {% endblock %}
            </div>
        </div>
        
        <div class="row-fluid">
            <div class="control-group form_field field_entity field_project">
                {% block form_project %}
                    {{ form_row(form['project']) }}
                {% endblock %}
            </div>
            {#AQUI VA LO DE DPTO#}
        </div>
        <div class="row-fluid">
            <div class="control-group form_field field_entity field_assignedTo">
                {% block form_assignedTo %}
                    {{ form_row(form['assignedTo']) }}
                {% endblock %}
            </div>
        </div>
       
        <div class="row-fluid">
            <div class="control-group form_field field_textarea field_description">
                {% block form_description %}
                    {{ form_row(form['description']) }}
                {% endblock %}
            </div>
        </div>
        <div class="row-fluid">
            <div class="control-group form_field field_double_list field_followers">
                {% block form_followers %}
                    {{ form_row(form['followers']) }}
                {% endblock %}
            </div>
        </div>
        <div class="row-fluid">
            <div class="control-group form_field field_checkbox field_done">
                {% block form_done %}
                    {{ form_row(form['done']) }}
                {% endblock %}
            </div>
        </div>
    </fieldset>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(function(){
            $("#edit_ticket_project").change(function(){
                var data = {
                    project_id: $(this).val()
                };

                $.ajax({
                    type: 'post',
                    url: '{{ path("select_users") }}',
                    data: data,
                    success: function(data) {
                        $('#edit_ticket_assignedTo').html(data);
                    }
                });
            });

            {#$("#location_province").change(function(){#}
                {#var data = {#}
                    {#province_id: $(this).val()#}
                {#};#}

                {#$.ajax({#}
                    {#type: 'post',#}
                    {#url: '{{ path("select_cities") }}',#}
                    {#data: data,#}
                    {#success: function(data) {#}
                        {#$('#location_city').html(data);#}
                    {#}#}
                {#});#}
            {#});#}
        });
    </script>
{% endblock %}